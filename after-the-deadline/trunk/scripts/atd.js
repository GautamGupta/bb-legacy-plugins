var a,EXPORTED_SYMBOLS=["AtDCore"];function AtDCore(){this.ignore_types=["Bias Language","Cliches","Complex Expression","Diacritical Marks","Double Negatives","Hidden Verbs","Jargon Language","Passive voice","Phrases to Avoid","Redundant Expression"];this.ignore_strings={};this.i18n={}}a=AtDCore.prototype;a.getLang=function(b,c){if(this.i18n[b]==undefined)return c;return this.i18n[b]};a.addI18n=function(b){this.i18n=b}; a.setIgnoreStrings=function(b){var c=this;this.map(b.split(/,\s*/g),function(d){c.ignore_strings[d]=1})};a.showTypes=function(b){b.split(/,\s*/g);var c={};c["Double Negatives"]=1;c["Hidden Verbs"]=1;c["Passive voice"]=1;c["Bias Language"]=1;c.Cliches=1;c["Complex Expression"]=1;c["Diacritical Marks"]=1;c["Jargon Language"]=1;c["Phrases to Avoid"]=1;c["Redundant Expression"]=1;var d=[];this.map(this.ignore_types,function(f){c[f]==undefined&&d.push(f)});this.ignore_types=d}; a.makeError=function(b,c,d,f){var e={};e.type=d;e.string=b;e.tokens=c;e.regexp=(new RegExp(b+"\\b")).test(b)?new RegExp("(?!"+b+"<)"+b.replace(/\s+/g,f)+"\\b"):new RegExp("(?!"+b+"<)"+b.replace(/\s+/g,f));e.used=false;return e}; a.addToErrorStructure=function(b,c,d,f){var e=this;this.map(c,function(g){var o=g.word.split(/\s+/),m=g.pre,h=o[0];if(b["__"+h]==undefined){b["__"+h]={};b["__"+h].pretoks={};b["__"+h].defaults=[]}if(m=="")b["__"+h].defaults.push(e.makeError(g.word,o,d,f,m));else{if(b["__"+h].pretoks["__"+m]==undefined)b["__"+h].pretoks["__"+m]=[];b["__"+h].pretoks["__"+m].push(e.makeError(g.word,o,d,f,m))}})}; a.buildErrorStructure=function(b,c,d){var f=this._getSeparators(),e={};this.addToErrorStructure(e,b,"hiddenSpellError",f);this.addToErrorStructure(e,d,"hiddenGrammarError",f);this.addToErrorStructure(e,c,"hiddenSuggestion",f);return e};a._getSeparators=function(){var b="",c;for(c=0;c<28;c++)b+="\\"+'"s!#$%&()*+,./:;<=>?@[]^_{|}'.charAt(c);return"(?:(?:[\u00a0"+b+"])|(?:\\-\\-))+"}; a.processXML=function(b){var c={};this.map(this.ignore_types,function(l){c[l]=1});this.suggestions=[];var d=b.getElementsByTagName("error");b=[];var f=[],e=[];for(i=0;i<d.length;i++)if(d[i].getElementsByTagName("string").item(0).firstChild!=null){var g=d[i].getElementsByTagName("string").item(0).firstChild.data,o=d[i].getElementsByTagName("type").item(0).firstChild.data,m=d[i].getElementsByTagName("description").item(0).firstChild.data,h;h=d[i].getElementsByTagName("precontext").item(0).firstChild!= null?d[i].getElementsByTagName("precontext").item(0).firstChild.data:"";if(this.ignore_strings[g]==undefined){var k={};k.description=m;k.suggestions=[];k.matcher=new RegExp("^"+g.replace(/\s+/,this._getSeparators())+"$");k.context=h;k.string=g;k.type=o;this.suggestions.push(k);if(d[i].getElementsByTagName("suggestions").item(0)!=undefined){var q=d[i].getElementsByTagName("suggestions").item(0).getElementsByTagName("option");for(j=0;j<q.length;j++)k.suggestions.push(q[j].firstChild.data)}if(d[i].getElementsByTagName("url").item(0)!= undefined){q=d[i].getElementsByTagName("url").item(0).firstChild.data;k.moreinfo=q+"&theme=tinymce"}if(c[m]==undefined){o=="suggestion"&&e.push({word:g,pre:h});o=="grammar"&&b.push({word:g,pre:h})}if(o=="spelling"||m=="Homophone")f.push({word:g,pre:h});if(m=="Cliches")k.description="Clich&eacute;s";if(m=="Spelling")k.description=this.getLang("menu_title_spelling","Spelling");if(m=="Repeated Word")k.description=this.getLang("menu_title_repeated_word","Repeated Word")}}d=f.length+b.length+e.length; return{errors:d>0?this.buildErrorStructure(f,e,b):undefined,count:d,suggestions:this.suggestions}};a.findSuggestion=function(b){var c=b.innerHTML,d=(this.getAttrib(b,"pre")+"").replace(/[\\,!\\?\\."\s]/g,"");this.getAttrib(b,"pre")==undefined&&alert(b.innerHTML);b=undefined;for(var f=this.suggestions.length,e=0;e<f;e++)if((d==""||d==this.suggestions[e].context)&&this.suggestions[e].matcher.test(c)){b=this.suggestions[e];break}return b}; function TokenIterator(b){this.tokens=b;this.last=this.count=this.index=0}a=TokenIterator.prototype;a.next=function(){var b=this.tokens[this.index];this.count=this.last;this.last+=b.length+1;this.index++;return b};a.hasNext=function(){return this.index<this.tokens.length};a.hasNextN=function(b){return this.index+b<this.tokens.length};a.skip=function(b,c){this.index+=b;this.last+=c;if(this.index<this.tokens.length)this.count=this.last-this.tokens[this.index].length};a.getCount=function(){return this.count}; a.peek=function(b){var c=[];b=this.index+b;for(var d=this.index;d<b;d++)c.push(this.tokens[d]);return c};a=AtDCore.prototype; a.markMyWords=function(b,c){var d=new RegExp(this._getSeparators()),f=[],e=0,g=this;this._walk(b,function(m){m.nodeType==3&&!g.isMarkedNode(m)&&f.push(m)});var o;this.map(f,function(m){var h;if(m.nodeType==3){h=m.nodeValue;var k=m.nodeValue.split(d),q="",l=[];for(o=new TokenIterator(k);o.hasNext();){k=o.next();var s=c["__"+k],v;if(s!=undefined&&s.pretoks!=undefined){v=s.defaults;s=s.pretoks["__"+q];var n=false,r,w;r=h.substr(0,o.getCount());w=h.substr(r.length,h.length);r=function(p){if(p!=undefined&& !p.used&&p.regexp.test(w)){l.push([p.regexp,'<span class="'+p.type+'" pre="'+q+'">$&</span>']);n=p.used=true}};if(s!=undefined){q+=" ";g.map(s,r)}if(!n){q="";g.map(v,r)}}q=k}if(l.length>0){newNode=m;for(h=0;h<l.length;h++){var x=l[h][0],y=l[h][1];newNode=function(p){if(p.nodeType==3){e++;return g.isIE()&&p.nodeValue.length>0&&p.nodeValue.substr(0,1)==" "?g.create('<span class="mceItemHidden">&nbsp;</span>'+p.nodeValue.substr(1,p.nodeValue.length-1).replace(x,y),false):g.create(p.nodeValue.replace(x, y),false)}else{for(var u=g.contents(p),t=0;t<u.length;t++)if(u[t].nodeType==3&&x.test(u[t].nodeValue)){var z;z=g.isIE()&&u[t].nodeValue.length>0&&u[t].nodeValue.substr(0,1)==" "?g.create('<span class="mceItemHidden">&nbsp;</span>'+u[t].nodeValue.substr(1,u[t].nodeValue.length-1).replace(x,y),true):g.create(u[t].nodeValue.replace(x,y),true);g.replaceWith(u[t],z);g.removeParent(z);e++;return p}return p}}(newNode)}g.replaceWith(m,newNode)}}});return e}; a._walk=function(b,c){var d;for(d=0;d<b.length;d++){c.call(c,b[d]);this._walk(this.contents(b[d]),c)}};a.removeWords=function(b,c){var d=0,f=this;this.map(this.findSpans(b).reverse(),function(e){if(e&&(f.isMarkedNode(e)||f.hasClass(e,"mceItemHidden")||f.isEmptySpan(e)))if(e.innerHTML=="&nbsp;"){var g=document.createTextNode(" ");f.replaceWith(e,g)}else if(!c||e.innerHTML==c){f.removeParent(e);d++}});return d}; a.isEmptySpan=function(b){return this.getAttrib(b,"class")==""&&this.getAttrib(b,"style")==""&&this.getAttrib(b,"id")==""&&!this.hasClass(b,"Apple-style-span")&&this.getAttrib(b,"mce_name")==""};a.isMarkedNode=function(b){return this.hasClass(b,"hiddenGrammarError")||this.hasClass(b,"hiddenSpellError")||this.hasClass(b,"hiddenSuggestion")};a.applySuggestion=function(b,c){if(c=="(omit)")this.remove(b);else{c=this.create(c);this.replaceWith(b,c);this.removeParent(c)}}; a.hasErrorMessage=function(b){return b!=undefined&&b.getElementsByTagName("message").item(0)!=null};a.getErrorMessage=function(b){return b.getElementsByTagName("message").item(0)};a.isIE=function(){return navigator.appName=="Microsoft Internet Explorer"};var AtD=jQuery.extend({i18n:{},rpc_css:"http://www.polishmywriting.com/atd_jquery/server/proxycss.php?data=",listener:{}},AtD||{api_key:"",rpc:""});AtD.getLang=function(b,c){if(AtD[b]==undefined)return c;return AtD[b]}; AtD.addI18n=function(b){AtD.i18n=b};AtD.setIgnoreStrings=function(b){AtD.core.setIgnoreStrings(b)};AtD.showTypes=function(b){AtD.core.showTypes(b)}; AtD.check=function(b,c){typeof AtD_proofread_click_count!="undefined"&&AtD_proofread_click_count++;AtD.callback_f=c;AtD.remove(b);c=jQuery("#"+b);c.html();text=jQuery.trim(c.html());text=encodeURIComponent(text);jQuery.ajax({type:"POST",url:AtD.rpc+"?url=/checkDocument",data:"key="+AtD.api_key+"&data="+text,format:"raw",dataType:jQuery.browser.msie?"text":"xml",error:function(d,f,e){AtD.callback_f!=undefined&&AtD.callback_f.error!=undefined&&AtD.callback_f.error(f+": "+e)},success:function(d){var f; if(typeof d=="string"){f=new ActiveXObject("Microsoft.XMLDOM");f.async=false;f.loadXML(d)}else f=d;if(AtD.core.hasErrorMessage(f))AtD.callback_f!=undefined&&AtD.callback_f.error!=undefined&&AtD.callback_f.error(AtD.core.getErrorMessage(f));else{AtD.container=b;d=AtD.processXML(b,f);AtD.callback_f!=undefined&&AtD.callback_f.ready!=undefined&&AtD.callback_f.ready(d);d==0&&AtD.callback_f!=undefined&&AtD.callback_f.success!=undefined&&AtD.callback_f.success(d);AtD.counter=d;AtD.count=d}}})}; AtD.remove=function(b){AtD._removeWords(b,null)};AtD.clickListener=function(b){AtD.core.isMarkedNode(b.target)&&AtD.suggest(b.target)};AtD.processXML=function(b,c){c=AtD.core.processXML(c);if(c.count>0)c.count=AtD.core.markMyWords(jQuery("#"+b).contents(),c.errors);jQuery("#"+b).unbind("click",AtD.clickListener);jQuery("#"+b).click(AtD.clickListener);return c.count}; AtD.useSuggestion=function(b){this.core.applySuggestion(AtD.errorElement,b);AtD.counter--;AtD.counter==0&&AtD.callback_f!=undefined&&AtD.callback_f.success!=undefined&&AtD.callback_f.success(AtD.count)};AtD.editSelection=function(){AtD.errorElement.parent();AtD.callback_f!=undefined&&AtD.callback_f.editSelection!=undefined&&AtD.callback_f.editSelection(AtD.errorElement)}; AtD.ignoreSuggestion=function(){AtD.core.removeParent(AtD.errorElement);AtD.counter--;AtD.counter==0&&AtD.callback_f!=undefined&&AtD.callback_f.success!=undefined&&AtD.callback_f.success(AtD.count)};AtD.ignoreAll=function(b){var c=AtD.errorElement.text();b=AtD._removeWords(b,c);AtD.counter-=b;AtD.counter==0&&AtD.callback_f!=undefined&&AtD.callback_f.success!=undefined&&AtD.callback_f.success(AtD.count);if(AtD.callback_f!=undefined&&AtD.callback_f.ignore!=undefined){AtD.callback_f.ignore(c);AtD.core.setIgnoreStrings(c)}}; AtD.explainError=function(){AtD.callback_f!=undefined&&AtD.callback_f.explain!=undefined&&AtD.callback_f.explain(AtD.explainURL)}; AtD.suggest=function(b){if(jQuery("#suggestmenu").length==0){var c=jQuery('<div id="suggestmenu"></div>');c.prependTo("body")}else{c=jQuery("#suggestmenu");c.hide()}errorDescription=AtD.core.findSuggestion(b);AtD.errorElement=jQuery(b);c.empty();if(errorDescription==undefined)c.append("<strong>"+AtD.getLang("menu_title_no_suggestions","No suggestions")+"</strong>");else if(errorDescription.suggestions.length==0)c.append("<strong>"+errorDescription.description+"</strong>");else{c.append("<strong>"+ errorDescription.description+"</strong>");for(var d=0;d<errorDescription.suggestions.length;d++)(function(f){c.append("<a onclick=\"AtD.useSuggestion('"+f.replace(/'/,"\\'")+"');\">"+f+"</a>")})(errorDescription.suggestions[d])}if(AtD.callback_f!=undefined&&AtD.callback_f.explain!=undefined&&errorDescription.moreinfo!=undefined){c.append('<a onclick="AtD.explainError();" class="spell_sep_top">'+AtD.getLang("menu_option_explain","Explain...")+"</a>");AtD.explainURL=errorDescription.moreinfo}c.append('<a onclick="AtD.ignoreSuggestion();" class="spell_sep_top">'+ AtD.getLang("menu_option_ignore_once","Ignore suggestion")+"</a>");if(AtD.callback_f!=undefined&&AtD.callback_f.editSelection!=undefined){AtD.callback_f!=undefined&&AtD.callback_f.ignore!=undefined?c.append("<a onclick=\"AtD.ignoreAll('"+AtD.container+"');\">"+AtD.getLang("menu_option_ignore_always","Ignore always")+"</a>"):c.append("<a onclick=\"AtD.ignoreAll('"+AtD.container+"');\">"+AtD.getLang("menu_option_ignore_all","Ignore all")+"</a>");c.append("<a onclick=\"AtD.editSelection('"+AtD.container+ '\');" class="spell_sep_bottom spell_sep_top">'+AtD.getLang("menu_option_edit_selection","Edit Selection...")+"</a>")}else AtD.callback_f!=undefined&&AtD.callback_f.ignore!=undefined?c.append("<a onclick=\"AtD.ignoreAll('"+AtD.container+'\');" class="spell_sep_bottom">'+AtD.getLang("menu_option_ignore_always","Ignore always")+"</a>"):c.append("<a onclick=\"AtD.ignoreAll('"+AtD.container+'\');" class="spell_sep_bottom">'+AtD.getLang("menu_option_ignore_all","Ignore all")+"</a>");d=jQuery(b).offset(); b=jQuery(b).width();jQuery(c).css({left:d.left+b+"px",top:d.top+"px"});jQuery(c).fadeIn(200);AtD.suggestShow=true;setTimeout(function(){jQuery("body").bind("click",function(){AtD.suggestShow||jQuery("#suggestmenu").fadeOut(200)})},1);setTimeout(function(){AtD.suggestShow=false},2)};AtD._removeWords=function(b,c){return this.core.removeWords(jQuery("#"+b),c)}; AtD.initCoreModule=function(){var b=new AtDCore;b.hasClass=function(c,d){return jQuery(c).hasClass(d)};b.map=jQuery.map;b.contents=function(c){return jQuery(c).contents()};b.replaceWith=function(c,d){return jQuery(c).replaceWith(d)};b.findSpans=function(c){return jQuery.makeArray(c.find("span"))};b.create=function(c){return jQuery('<span class="mceItemHidden">'+c+"</span>")};b.remove=function(c){return jQuery(c).remove()};b.removeParent=function(c){return jQuery(c).unwrap?jQuery(c).contents().unwrap(): jQuery(c).replaceWith(jQuery(c).html())};b.getAttrib=function(c,d){return jQuery(c).attr(d)};return b};AtD.core=AtD.initCoreModule(); (function(b){b.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:true,overlayOpacity:0.01,overlayColor:"#FFF",draggable:false,okButton:"&nbsp;"+AtD.getLang("button_ok","OK")+"&nbsp;",cancelButton:"&nbsp;"+AtD.getLang("button_cancel","Cancel")+"&nbsp;",dialogClass:null,alert:function(c,d,f){if(d==null)d="Alert";b.alerts._show(d,c,null,"alert",function(e){f&&f(e)})},confirm:function(c,d,f){if(d==null)d="Confirm";b.alerts._show(d,c,null,"confirm",function(e){f&&f(e)})},prompt:function(c, d,f,e){if(f==null)f="Prompt";b.alerts._show(f,c,d,"prompt",function(g){e&&e(g)})},_show:function(c,d,f,e,g){b.alerts._hide();b.alerts._overlay("show");b("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>');b.alerts.dialogClass&&b("#popup_container").addClass(b.alerts.dialogClass);var o=b.browser.msie&&parseInt(b.browser.version)<=6?"absolute":"fixed";b("#popup_container").css({position:o,zIndex:99999,padding:0,margin:0}); b("#popup_title").text(c);b("#popup_content").addClass(e);b("#popup_message").text(d);b("#popup_message").html(b("#popup_message").text().replace(/\n/g,"<br />"));b("#popup_container").css({minWidth:b("#popup_container").outerWidth(),maxWidth:b("#popup_container").outerWidth()});b.alerts._reposition();b.alerts._maintainPosition(true);switch(e){case "alert":b("#popup_message").after('<div id="popup_panel"><input type="button" value="'+b.alerts.okButton+'" id="popup_ok" /></div>');b("#popup_ok").click(function(){b.alerts._hide(); g(true)});b("#popup_ok").focus().keypress(function(h){if(h.keyCode==13||h.keyCode==27)b("#popup_ok").trigger("click")});break;case "confirm":b("#popup_message").after('<div id="popup_panel"><input type="button" value="'+b.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+b.alerts.cancelButton+'" id="popup_cancel" /></div>');b("#popup_ok").click(function(){b.alerts._hide();g&&g(true)});b("#popup_cancel").click(function(){b.alerts._hide();g&&g(false)});b("#popup_ok").focus();b("#popup_ok, #popup_cancel").keypress(function(h){h.keyCode== 13&&b("#popup_ok").trigger("click");h.keyCode==27&&b("#popup_cancel").trigger("click")});break;case "prompt":b("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><input type="button" value="'+b.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+b.alerts.cancelButton+'" id="popup_cancel" /></div>');b("#popup_prompt").width(b("#popup_message").width());b("#popup_ok").click(function(){var h=b("#popup_prompt").val();b.alerts._hide(); g&&g(h)});b("#popup_cancel").click(function(){b.alerts._hide();g&&g(null)});b("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(h){h.keyCode==13&&b("#popup_ok").trigger("click");h.keyCode==27&&b("#popup_cancel").trigger("click")});f&&b("#popup_prompt").val(f);b("#popup_prompt").focus().select();break}if(b.alerts.draggable)try{b("#popup_container").draggable({handle:b("#popup_title")});b("#popup_title").css({cursor:"move"})}catch(m){}},_hide:function(){b("#popup_container").remove();b.alerts._overlay("hide"); b.alerts._maintainPosition(false)},_overlay:function(c){switch(c){case "show":b.alerts._overlay("hide");b("BODY").append('<div id="popup_overlay"></div>');b("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:b(document).height(),background:b.alerts.overlayColor,opacity:b.alerts.overlayOpacity});break;case "hide":b("#popup_overlay").remove();break}},_reposition:function(){var c=b(window).height()/2-b("#popup_container").outerHeight()/2+b.alerts.verticalOffset, d=b(window).width()/2-b("#popup_container").outerWidth()/2+b.alerts.horizontalOffset;if(c<0)c=0;if(d<0)d=0;if(b.browser.msie&&parseInt(b.browser.version)<=6)c+=b(window).scrollTop();b("#popup_container").css({top:c+"px",left:d+"px"});b("#popup_overlay").height(b(document).height())},_maintainPosition:function(c){if(b.alerts.repositionOnResize)switch(c){case true:b(window).bind("resize",b.alerts._reposition);break;case false:b(window).unbind("resize",b.alerts._reposition);break}}};jAlert=function(c, d,f){b.alerts.alert(c,d,f)};jConfirm=function(c,d,f){b.alerts.confirm(c,d,f)};jPrompt=function(c,d,f,e){b.alerts.prompt(c,d,f,e)}})(jQuery);AtD.textareas={}; AtD.restoreTextArea=function(b){var c=AtD.textareas[b];if(!(c==undefined||c.before==c.link.html())){AtD.remove(b);jQuery("#AtD_sync_").remove();var d;d=navigator.appName=="Microsoft Internet Explorer"?jQuery("#"+b).html().replace(/<BR.*?class.*?atd_remove_me.*?>/gi,"\n"):jQuery("#"+b).html();jQuery("#"+b).replaceWith(c.node);jQuery("#"+b).val(d.replace(/\&lt\;/g,"<").replace(/\&gt\;/,">").replace(/\&amp;/g,"&"));jQuery("#"+b).height(c.height);c.link.html(c.before)}}; AtD.checkTextArea=function(b,c,d){AtD._checkTextArea(b,AtD.check,c,d)}; AtD._checkTextArea=function(b,c,d,f){var e=jQuery("#"+b);if(AtD.textareas[b]==undefined){for(var g={},o=function(n,r){if(r.css(n)!="")g[n]=r.css(n)},m=["background-color","color","font-size","font-family","border-top-width","border-bottom-width","border-left-width","border-right-width","border-top-style","border-bottom-style","border-left-style","border-right-style","border-top-color","border-bottom-color","border-left-color","border-right-color","text-align","margin-top","margin-bottom","margin-left", "margin-right","width","line-height","letter-spacing","left","right","top","bottom","position","padding-left","padding-right","padding-top","padding-bottom"],h=0;h<m.length;h++)o(m[h],e);AtD.textareas[b]={node:e,height:e.height(),link:jQuery("#"+d),before:jQuery("#"+d).html(),after:f,style:g}}var k=AtD.textareas[b];if(k.link.html()!=k.before)AtD.restoreTextArea(b);else if(e.val()){k.link.html(k.after);var q=function(){return false};k.link.click(q);var l,s=jQuery('<input type="hidden" />');s.attr("id", "AtD_sync_");s.val(e.val());d=e.attr("name");if(navigator.appName=="Microsoft Internet Explorer"){e.replaceWith('<div id="'+b+'">'+e.val().replace(/\&/g,"&amp;").replace(/[\n\r\f]/gm,'<BR class="atd_remove_me">')+"</div>");l=jQuery("#"+b);l.attr("style",k.node.attr("style"));l.attr("class",k.node.attr("class"));l.css({overflow:"auto"});k.style["font-size"]=undefined;k.style["font-family"]=undefined}else{e.replaceWith('<div id="'+b+'">'+e.val().replace(/\&/g,"&amp;")+"</div>");l=jQuery("#"+b);l.attr("style", k.node.attr("style"));l.attr("class",k.node.attr("class"));l.css({overflow:"auto","white-space":"pre-wrap"});l.attr("contenteditable","true");l.attr("spellcheck",false);l.css({outline:"none"})}l.keypress(function(n){return n.keyCode!=13});s.attr("name",d);l.after(s);var v=false;e=function(){if(!v){v=true;setTimeout(function(){var n;n=navigator.appName=="Microsoft Internet Explorer"?l.html().replace(/<BR.*?class.*?atd_remove_me.*?>/gi,"\n"):l.html();var r=jQuery("<div></div>");r.html(n);AtD.core.removeWords(r); s.val(r.html().replace(/\&lt\;/g,"<").replace(/\&gt\;/,">").replace(/\&amp;/g,"&"));v=false},1500)}};l.keypress(e);l.mousemove(e);l.mouseout(e);l.css(k.style);l.height(k.height);c(b,{ready:function(){k.link.unbind("click",q)},explain:function(n){window.open(n,"","width=480,height=380,toolbar=0,status=0,resizable=0,location=0,menuBar=0,left="+(screen.width/2-240)+",top="+(screen.height/2-190)).focus()},success:function(n){n==0&&jAlert(AtD.getLang("message_no_errors_found","No writing errors were found!"), AtD.getLang("message_no_errors","No errors!"));AtD.restoreTextArea(b)},error:function(n){k.link.unbind("click",q);n==undefined?jAlert(AtD.getLang("message_server_error_short","There was an error communicating with the spell checking service."),AtD.getLang("message_error","Error!")):jAlert(AtD.getLang("message_server_error_short","There was an error communicating with the spell checking service.")+"\n\n"+n,AtD.getLang("message_error","Error!"));AtD.restoreTextArea(b)},editSelection:function(n){var r= n.text();jPrompt(AtD.getLang("dialog_replace_selection","Replace selection with")+":",n.text(),AtD.getLang("dialog_replace","Replace"),function(w){if(w!=null&&r!=w){jQuery(n).html(w);AtD.core.removeParent(n);AtD.counter--;AtD.counter==0&&AtD.restoreTextArea(b)}})}})}else{AtD.restoreTextArea(b);jAlert(AtD.getLang("message_error_no_text","Please enter some text in the post textbox to be checked!"),AtD.getLang("message_error","Error!"))}}; jQuery.fn.addProofreader=function(b){this.id=0;var c=this,d=jQuery.extend({},jQuery.fn.addProofreader.defaults,b);return this.each(function(){$this=jQuery(this);if(!($this.css("display")=="none"||$this.attr("spellcheck")==false)){$this.attr("id").length==0&&$this.attr("id","AtD_"+c.id++);var f=$this.attr("id"),e=jQuery("<span></span>");e.attr("id","AtD_"+c.id++);e.html(d.proofread_content);e.click(function(){AtD.current_id!=undefined&&AtD.current_id!=f&&AtD.restoreTextArea(AtD.current_id);AtD.checkTextArea(f, e.attr("id"),d.edit_text_content);AtD.current_id=f});$this.wrap("<div></div>");$this.parents("form").submit(function(){AtD.restoreTextArea(f)});$this.before(e)}})};jQuery.fn.addProofreader.defaults={edit_text_content:'<span class="atd_container"><a class="checkLink">'+AtD.getLang("button_edit_text","Edit Text")+"</a></span>",proofread_content:'<span class="atd_container"><a class="checkLink">'+AtD.getLang("button_proofread","Proofread")+"</a></span>"};jQuery(function(){jQuery("textarea").addProofreader()});